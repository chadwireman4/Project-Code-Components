<!DOCTYPE html>
<html lang="en">
<head>
    <title>MicroManage | Home</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="theme-color" content="#000000" />
    <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico" />
    <!-- <link rel="manifest" href="%PUBLIC_URL%/manifest.json" /> -->
    <!-- <script src="./myLib.js"></script> -->
</head>
<body>
    <header class="no-select">
    <img id='logo' src="micromanage.svg" alt="micro manage logo">
    <h1>MicroManage</h1>
    <img id = 'logout' class="icons" src="icon-logout.svg" alt='log out icon'>
    <!-- <img id="addIcon" class="icons" src="icon-add.svg" alt='log out icon'> -->
    <div class="el-checkbox">
        <label class="el-switch">
            <input id="dark-check" type="checkbox" name="switch">
            <span class="el-switch-style"></span>
        </label>
    </div>
    <p><b>Dark Mode<b></p>
    <script type="text/javascript">
        window.onload = function(){
            let checkBox = document.getElementById('dark-check');
            var logOut = document.getElementById('logout');
            logOut.onclick = function(){
                fetch('/api/logout')
                .then(res => res.json())
                .then( res => {
                    if(res.status === 'success'){
                        location.replace("http://localhost:3001/");
                    }
                })
                .catch(e => console.log(e))

            if (checkBox != null) {
                document.getElementById('dark-check').onclick = function() {
                    document.getElementsByTagName('body')[0].classList.toggle('dark');
                    document.getElementsByTagName('header')[0].classList.toggle('dark');
                    document.getElementById('calendar-wrapper').classList.toggle('dark');
                    document.getElementById('calendar').classList.toggle('dark');
                    document.getElementById('weatherToday').classList.toggle('dark');
                    document.getElementById('todayEvents').classList.toggle('dark');
                    document.getElementsByClassName('form')[0].getElementsByClassName('form')[0].classList.toggle('dark');
                    document.getElementsByClassName('form')[2].classList.toggle('dark');
                    document.getElementById('root').getElementsByTagName('section')[0].getElementsByTagName('div')[0].getElementsByTagName('div')[0].getElementsByTagName('div')[0].classList.toggle('dark');
                    document.getElementById('root').getElementsByTagName('section')[1].getElementsByTagName('div')[0].getElementsByTagName('div')[0].getElementsByTagName('div')[0].classList.toggle('dark');
                    document.getElementById('root').getElementsByTagName('section')[0].getElementsByTagName('div')[0].getElementsByTagName('div')[0].classList.toggle('dark');
                    document.getElementById('root').getElementsByTagName('section')[1].getElementsByTagName('div')[0].getElementsByTagName('div')[0].classList.toggle('dark');

                    let dayBg = document.getElementsByClassName('rbc-day-bg');
                    let header = document.getElementsByClassName('rbc-header');
                    let monthView = document.getElementsByClassName('rbc-month-view');
                    let monthRow = document.getElementsByClassName('rbc-month-row');
                    let button = document.getElementById('calendar-wrapper').getElementsByTagName('button');

                    for (let i = 0; i < dayBg.length; i++) {
                        dayBg[i].classList.toggle('dark');
                    }

                    for (let i = 0; i < header.length; i++) {
                        header[i].classList.toggle('dark');
                    }

                    for (let i = 0; i < monthView.length; i++) {
                        monthView[i].classList.toggle('dark');
                    }

                    for (let i = 0; i < monthRow.length; i++) {
                        monthRow[i].classList.toggle('dark');
                    }

                    for (let i = 0; i < button.length; i++) {
                        button[i].classList.toggle('dark');
                    }

                    if (document.getElementsByTagName('body')[0].classList.contains('dark')) {
                        document.getElementById('addIcon').src = "icon-add-dark.svg"
                        document.getElementById('reminderIcon').src = "icon-reminder-dark.svg"
                        document.getElementById('logout').src = "icon-logout-dark.svg"
                        document.getElementById('logo').src = "micromanage-dark.svg"
                    } else {
                        document.getElementById('addIcon').src = "icon-add.svg"
                        document.getElementById('reminderIcon').src = "icon-reminder.svg"
                        document.getElementById('logout').src = "icon-logout.svg"
                        document.getElementById('logo').src = "micromanage.svg"
                    }
                };
            }
        
        }    
    }
    </script>
    </header>
    <div id="root"></div>
</body>
</html>
